<view>
  <swiper class="swiper" indicator-dots="{{indicatorDots}}" autoplay="{{autoplay}}" circular="{{circular}}" vertical="{{vertical}}" interval="{{interval}}" duration="{{duration}}" previous-margin="{{previousMargin}}px" next-margin="{{nextMargin}}px">
    <block wx:for="{{image}}" wx:for-index="index" wx:key="key">
      <swiper-item>
        <image src="{{item}}" class="swiper image" mode="scaleToFill" />
        <!-- <view class="swiper-item {{item.url}}"></view> -->
      </swiper-item>
    </block>
  </swiper>
</view>
<view class="title">
  <text>会员积分记录</text>
</view>
<view class="mainframe">
  <view wx:if="{{userphone==''}}" style="display:flex; flex-direction:row; justify-content:space-between;font-size: 28rpx;color: #3683d6;">

    <navigator url="../mine/userinfo">请用手机号码登录</navigator>

  </view>
  <view wx:else style="display:flex; flex-direction:column;">
    <view style="display:flex; flex-direction:row; justify-content:space-between;font-size: 32rpx;">
      <view style="align-items:center;color:#3683d6">推广积分余额：{{promoterpoints}}分</view>
      <view style="align-items:center;color:#3683d6">消费积分余额：{{tradepoints}}分</view>

    </view>
    <view>
      <view style="align-items:center;color:#3683d6;font-size: 32rpx;">更新时间：{{balanceupdatetime}}</view>
    </view>
    <view>
      <l-button class="mainbtn" width="600" data-name="POINTS" bind:lintap="bvRefresh" shape="semicircle" plain="{{true}}">刷新</l-button>
    </view>
    <view>
      <l-tabs>
        <l-tabpanel tab="推广积分纪录" key="one" slot="one">
          <view wx:for="{{promoterhistory}}" wx:key="key">
            <l-card type="primary" plaintext="{{true}}">
              <view>积分日期：{{item.AddDate}}</view>
              <view>积分事由：{{item.ProductName}}</view>
              <view>积分数值：{{item.RegistrantPoints}}</view>
              <view style="display:flex; flex-direction:row;">
                <view>入账状态：</view>
                <view wx:if="{{item.PointsStatus =='unchecked'}}">待入账</view>
                <view wx:if="{{item.PointsStatus =='checked'}}">已入账</view>
              </view>
            </l-card>
          </view>
        </l-tabpanel>
        <l-tabpanel tab="消费积分纪录" key="two" slot="two">
          <view wx:for="{{tradehistory}}" wx:key="key">
            <l-card type="primary" plaintext="{{true}}">
              <view>积分日期：{{item.AddDate}}</view>
              <view>积分事由：{{item.ProductName}}</view>
              <view>积分数值：{{item.InviterPoints}}</view>
              <view style="display:flex; flex-direction:row;">
                <view>入账状态：</view>
                <view wx:if="{{item.PointsStatus =='unchecked'}}">待入账</view>
                <view wx:if="{{item.PointsStatus =='checked'}}">已入账</view>
              </view>
            </l-card>
          </view>
        </l-tabpanel>
      </l-tabs>
    </view>
  </view>
</view>
