<!-- 登录层 -->
<l-mask show="{{loginshow}}" center="true">
  <loginmask bind:myevent="onLogin"></loginmask>
</l-mask>
<!-- 内容层 -->
<swiper vertical="true" bindchange="nextVideo" current-item-id="{{infoid}}">
  <swiper-item wx:for="{{infoshares}}" wx:key="index">
    <view wx:if="{{item.ImagesUrl!='' && item.ImagesUrl!=undefined}}">
      <image style="display: block" src="{{item.ImagesUrl}}" mode="scaleToFill" />
    </view>
    <view wx:if="{{item.VideoUrl}}">
      <video loop="true" enable-progress-gesture="true" object-fit="fill" src="{{item.VideoUrl}}" id="video{{index}}" />
    </view>
    <view class="video-right">
      <view class="video-right-img" style="margin-bottom: 10rpx; background-image: url({{item.avatarUrl}})" data-user_id="{{item.UserId}}" bindtap="toOtherUser"></view>

      <view class="video-right-icon" bindtap="bvDonateShow">
        <l-icon name="like" color="white" />
      </view>
      <view class="video-right-text">{{Praise}}</view>

      <view class="video-right-icon" bindtap="bvCommentShow">
        <l-icon name="comment" color="white" />
      </view>
      <view class="video-right-text">{{comments.length}}</view>

      <view class="video-right-icon">
        <l-button special="{{true}}" open-type="share">
          <l-icon name="share" color="white" />
        </l-button>
      </view>

      <view class="video-right-icon">
        <l-button special="{{true}}" bind:lintap="bvEdit">
          <l-icon name="edit" color="white" />
        </l-button>
      </view>
    </view>
    <view class="video-btm">
      <view class="video-btm-con">
        <text>{{item.InfoTitle}}@{{item.nickName}}</text>
        <view class="content">{{item.InfoContent}}</view>
      </view>
    </view>
  </swiper-item>
</swiper>
<!-- 捐赠层 -->
<l-popup show="{{donateshow}}" content-align="center">
  <l-card plaintext="{{true}}" plaintext="{{true}}" l-class="donatecard">
    <l-radio-group placement="column" bind:linchange="bvDonateSelect">
      <l-radio placement="left" color="black" select-color="green" size="40" key="1" l-class="radio" cell="{{donate[0]}}" l-class="radio">
        <text>¥5元50个赞</text>
      </l-radio>
      <l-radio placement="left" color="black" select-color="green" size="40" key="2" l-class="radio" cell="{{donate[1]}}" l-class="radio">
        <text>¥10元110个赞</text>
      </l-radio>
      <l-radio placement="left" color="black" select-color="green" size="40" key="3" l-class="radio" cell="{{donate[2]}}" l-class="radio">
        <text>¥20元230个赞</text>
      </l-radio>
      <l-radio placement="left" color="black" select-color="green" size="40" key="4" l-class="radio" cell="{{donate[3]}}" l-class="radio">
        <text>¥30元350个赞</text>
      </l-radio>
    </l-radio-group>
    <text>\n</text>
    <view style="display: flex;flex-direction:row;align-items: center;justify-content:center;width: 50vw;padding: 0;">
      <l-button size="medium" shape="semicircle" plain="{{true}}" bind:lintap="bvToDonate">{{btnname}}</l-button>
    </view>
  </l-card>
</l-popup>
<!-- 评论层 -->
<l-popup show="{{commentshow}}" content-align="bottom">
  <l-card full="{{true}}" plaintext="{{true}}">
    <label style="display: flex; width: 100%;font-size: 20rpx;justify-content: center;">{{comments.length}}条评论</label>
    <scroll-view scroll-y="true" enable-flex="true" style="display: flex;flex-direction:column; width: 100%;height: 500rpx; box-sizing: border-box;">
      <view wx:for="{{comments}}" wx:key="index">
        <view style="display: flex; flex-direction: row;margin-top: 10rpx;">
          <view>
            <image class="avatar" src="{{item.avatarUrl}}"></image>
          </view>
          <view style="display: flex;flex-direction: column;width: 100%;">
            <view style="display: flex;flex-direction: row; justify-content: space-between;">
              <view class="nickname">{{item.nickName}}</view>
              <view class="nickname"><text decode='true' space="emsp"> 发表于{{item.PublishDate}}</text></view>
            </view>
            <view class="comment"><text decode='true' space="emsp">{{item.Comment}}</text></view>
            <view wx:if="{{creatorid==userid}}">
              <l-collapse>
                <l-collapse-item l-body-class="l-body-class" l-title-class="l-title-class" customTitle="{{true}}">
                  <!--自定义标题-->
                  <view class="nickname" slot="title">回复
                    <l-icon name="down" size="16" color="#999" />
                  </view>
                  <l-textarea type='text' auto-height="{{true}}" placeholder="请输入回复内容" maxlength='30' bind:linblur="bvReplyContent"></l-textarea>
                  <l-button size="mini" data-id="{{item._id}}" bind:lintap='bvReplySend' plain="{{true}}">发送回复</l-button>
                </l-collapse-item>
              </l-collapse>
              <view wx:if="{{item.Reply}}">
                <view class="nickname"><text decode='true' space="emsp">作者回复于{{item.ReplyDate}}</text></view>
                <view class="comment"><text decode='true' space="emsp">{{item.Reply}}</text></view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </scroll-view>
    <!-- 留言模块 -->
    <view wx:if="{{creatorid!=userid}}" style="display: flex;flex-direction:column;">
      <l-textarea type='text' auto-height="{{true}}" placeholder="善语结善缘，恶言伤人心" maxlength='30' bind:linblur="bvComment"></l-textarea>
      <view style="display: flex;flex-direction: row;justify-content: space-between;">
        <view style="width: 60rpx;">
          <button class="avatarBtn" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
            <image class="avatar" src="{{avatarurl}}"></image>
          </button>
        </view>
        <input class="nicknameinput" type="nickname" value="{{nickname}}" placeholder="点击获取昵称" bindblur="bvNickName" />
        <l-button size="mini" bind:lintap='bvPublish' plain="{{true}}">发送留言</l-button>

      </view>
    </view>
  </l-card>
</l-popup>