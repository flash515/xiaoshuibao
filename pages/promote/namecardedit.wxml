<!-- 登录层 -->
<l-mask show="{{loginshow}}" center="true">
  <l-card type="primary" plaintext="{{true}}" l-title-class="logincardtitle" l-class="logincard" title="请输入手机号码登录">
    <text>\r\n</text>
    <view class="logininputbox" style="justify-content:flex-start;">
      <view style="padding: 10rpx;">手机号：</view>
      <input style="width: 300rpx;" type="number" value="{{userphone}}" bind:input="bvUserPhone" required="{{true}}" />
    </view>
    <view class="logininputbox" style="justify-content:space-between;">
      <view style="padding: 10rpx;">验证码：</view>
      <input style="width: 150rpx;" type="number" value="{{phonecode}}" bind:input="bvPhoneCode" required="{{true}}" />
      <button plain bindtap="bvSendCode" disabled='{{disabled}}'>{{time}}</button>
    </view>
    <text>\r\n</text>
    <view class="loginbtnbox">
      <l-button shape="semicircle" plain="{{true}}" bind:lintap="onHideMaskTap" size="mini">取消登录</l-button>
      <l-button shape="semicircle" plain="{{true}}" bind:lintap="bvLogin" size="mini">验证并登录</l-button>
    </view>
  </l-card>
</l-mask>
<!-- 背景层 -->
<image class="bgimage" src="{{namecardbg}}" mode="scaleToFill" />
<!-- 名片层 -->
<view class="uplayout">
  <view class="namecard">
    <view class="companyname">{{companyname}}</view>
    <view class="user" style="display:flex; flex-direction:row; justify-content:space-between;align-items:flex-end;">
      <view style="display:flex;flex-direction:column;justify-content:flex-start;">
        <text>\n</text>
        <view class="username">{{username}}</view>
        <view wx:if="{{positon!=''&&position!=undefined}}" class="position">{{position}}</view>
        <view class="userphone">手机：{{userphone}}</view>
        <view wx:if="{{wechat!=''&&wechat!=undefined}}" class="wechat">微信：{{wechat}}</view>
        <view wx:if="{{telephone!=''&&telephone!= undefined}}" class="telephone">座机：{{telephone}}</view>
      </view>
      <image class="companylogo" src="{{companylogo}}"></image>
    </view>
    <view>
      <view wx:if="{{email!=''&&email!=undefined}}" class="email">邮箱：{{email}}</view>
      <view wx:if="{{website!=''&&website!=undefined}}" class="website">网站：{{website}}</view>
      <view wx:if="{{address!=''&&address!=undefined}}" class="address">地址：{{address}}</view>
    </view>
  </view>
</view>

<view wx:if="{{cardshow}}" class="mainframe">
  <view wx:if="{{imageview!=''&&imageview!=undefined}}" wx:for="{{imageview}}" wx:key="key">
    <image style="display: block" src="{{item}}" mode="scaleToFill" />
  </view>
  <view wx:if="{{businessscope!=''&&businessscope!=undefined}}" style="display:flex;flex-direction:column;justify-content:flex-start;" class="mainframe">
    <label class="labal">企业简介：</label>
    <text space="emsp" decode='true' class="text">{{businessscope}}</text>
  </view>
  <view style="display:flex; flex-direction:row; justify-content:space-between;" class="mainframe">
    <l-button size="mini" icon="order" icon-color="white" shape="semicircle" bind:lintap="bvEdit">制作电子名片</l-button>
    <l-button size="mini" shape="semicircle" plain="{{true}}" icon="share" icon-color="#3683d6" open-type="share">转发名片</l-button>
  </view>

</view>
<view wx:else>
  <l-tabs bind:linchange="changeTabs">
    <l-tabpanel tab="名片信息" key="one" slot="one">
      <view>
        <l-input type="number" label="手机号：" value="{{userphone}}" bind:lininput="bvUserPhone" required="{{true}}">
        </l-input>
      </view>
      <view style="display:flex; flex-direction:row; justify-content:space-between;align-items:center">
        <l-input type="number" class="phonecode" label="验证码：" value="{{phonecode}}" bind:lininput="bvPhoneCode" required="{{true}}">
        </l-input>
        <l-button shape="semicircle" plain="{{true}}" bind:lintap="bvSendCode" size="mini" disabled='{{disabled}}'>{{time}}</l-button>
      </view>
      <view class="line"></view>
      <view>
        <l-input type="text" label="我的姓名：" value="{{username}}" bind:lininput="bvUserName">
        </l-input>
      </view>
      <view>
        <l-input type="text" label="职务：" value="{{position}}" bind:lininput="bvPosition">
        </l-input>
      </view>
      <view>
        <l-input type="text" label="微信：" value="{{wechat}}" bind:lininput="bvWeChat"></l-input>
      </view>
      <view>
        <l-input type="text" label="邮箱：" value="{{email}}" bind:lininput="bvEmail"></l-input>
      </view>

      <view>
        <l-input type="text" label="企业名称：" value="{{companyname}}" bind:lininput="bvCompanyName"></l-input>
      </view>
      <view>
        <l-input type="text" label="座机：" value="{{telephone}}" bind:lininput="bvTelephone"></l-input>
      </view>
      <view> 
        <l-input type="text" label="网站：" value="{{website}}" bind:lininput="bvWebsite"></l-input>
      </view>
      <view>
        <l-input type="text" label="地址：" value="{{address}}" bind:lininput="bvAddress"></l-input>
      </view>

      <view>
        <label class="labal">企业简介：</label>
        <l-textarea type="text" indicator="{{true}}" maxlength="140" auto-height="{{true}}" value="{{businessscope}}" bind:lininput="bvBusinessScope"></l-textarea>
      </view>
    </l-tabpanel>
    <l-tabpanel tab="图片资料" key="two" slot="two">
      <view style="display:flex; flex-direction:row;margin-top: 10rpx; justify-content:space-between;align-items:center;font-size: 28rpx;">
        <label class="text">选择并上传图片资料：</label>

      </view>
      <view style="font-size: 28rpx;padding-left:25rpx;padding-right:25rpx; padding-top: 10rpx;">
        <l-image-picker size="4" count="4" bind:linchange="bvChooseImage" bind:linremove="bvRemoveImage" urls="{{imageview}}" />
        <l-button plain="{{true}}" bind:lintap="bvUploadImage">上传图片资料</l-button>
      </view>
    </l-tabpanel>
    <l-tabpanel tab="名片背景" key="three" slot="three">
      <scroll-view scroll-y="true" style="display: flex;flex-direction:column; width: 100%;height: 400rpx; box-sizing: border-box;padding-left: 20rpx;padding-right: 20rpx;">
        <l-radio-group placement="column" none-checked="{{false}}" bind:linchange="bvBgSelect">
        <block wx:for="{{namecardbgarray}}" wx:key="key">
          <l-radio placement="left" color="black" select-color="green" size="40" key="{{item}}" l-class="radio">
            <image src="{{item}}" class="bgarray" />
          </l-radio>
        </block>
      </l-radio-group>
  </scroll-view>
    </l-tabpanel>
    <l-tabpanel tab="企业Logo" key="four" slot="four">
      <view style="display:flex; flex-direction:row;margin-top: 10rpx; justify-content:space-between;align-items:center;font-size: 28rpx;">
        <label class="text">选择并上传企业Logo：</label>

      </view>
      <view style="font-size: 28rpx;padding-left:25rpx;padding-right:25rpx; padding-top: 10rpx;">
        <l-image-picker size="2" count="1" bind:linchange="bvChooseLogo" bind:linremove="bvRemoveLogo" urls="{{logoview}}" />
        <l-button plain="{{true}}" bind:lintap="bvUploadLogo">上传图片</l-button>
      </view>
    </l-tabpanel>
  </l-tabs>
  <view hidden="{{btnhidden}}" style="display:flex; flex-direction:row; justify-content:space-between;">

    <l-button type="default" shape="semicircle" icon="to-top" icon-color="white" form-type="submit" bind:lintap="bvUpdate">更新信息
    </l-button>
    <l-button size="mini" shape="semicircle" plain="{{true}}" icon="eye" icon-color="#3683d6" bind:lintap="bvView">预览名片</l-button>
  </view>

</view>